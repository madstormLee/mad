<h1>Locale Db Index</h1>

<nav class='component'>
	<a href='./create'>Common Tables</a>
	<a href='./commonTables'>Common Tables</a>
	<a href='./mockupables'>Mockupables</a>
</nav>

<section id='conn'>
<dl>
	<dt>dsn:</dt>
	<dd> <?=$model->dsn ?> </dd>
	<dt>id:</dt>
	<dd> <?=$model->id ?> </dd>
	<dt>pw:</dt>
	<dd>********</dd>
</dl>
</section>

<section id='currentDb' data-href='./status'>
	<h1>status</h1>

	<ul class='panel'>
		<? foreach( $model->attrs() as $row ): ?>
		<li><?=MadString::create($row)->format('camel|ucFirst')?>: <?=$model->attr( $row ); ?>
		<? endforeach; ?> 
	</ul>

	<? if ( $model->isEmpty() ): ?>
	<p class='panel'> No database connection available.  </p>
	<? endif; ?>
</section>

<form id='LocaleDbIndex' class='simple' action='save'>
	<? foreach( $model->getIndex() as $id => $database ): ?>
	<fieldset>
		<legend>
			<a href='~/Table?id=<?=$id?>'>ID : <?=$id?></a>
			<a class='toggleUpNext' href='#contents'>toggle</a>
		</legend>
		<ul>
			<? foreach( $database as $key => $value ): ?>
			<li>
				<label for='<?=$id?><?=$key?>'><?=$key?></label>
				<input type='text' id='<?=$id?><?=$key?>' name='<?=$id?>[<?=$key?>]' value='<?=$value?>' />
			</li>
			<? endforeach; ?>
		</ul>
	</fieldset>
	<? endforeach; ?>
	<nav class='buttons'>
		<button type='submit'>Save</button>
	</nav>
</form>
