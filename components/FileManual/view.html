<style>
h2 .datetime {
	font-size: 10px;
	color: #999;
	font-weight: 500;
}
#ManualView h2 + .explain {
border: 5px solid #aaa;
}
#ManualView.changed {
border: 2px solid #fcc;
}
#ManualView .explain {
margin-left: 20px;
padding: 10px;
font-size: 11pt;
line-height: 140%;
border: 2px solid #aaa;
white-space: pre;
}
#ManualView .explain textarea {
width: 99%;
border: 1px solid #eee;
font-size: 11pt;
line-height: 140%;
}
#ManualView dl.methods {
}
#ManualView dl.methods dt {
background: #eee;
margin-top: 3px;
padding: 3px;
border: 1px solid #ccc;
font-weight: 600;
}
#ManualView dl.methods dd {
}
</style>
<script>
$( function() {
	$('#ManualWrite').submit( function( ev ) {
		$('#contents').val( $('#ManualView').html() );
	});
	$('#ManualView .explain').dblclick( function( ev ) {
		if ( ! $('#ManualView').hasClass('changed') ) {
			$('#ManualView').addClass('changed');
		}
		var el = $(ev.target);
		var textarea = $("<textarea>" + el.html() + "</textarea>");
		textarea.blur( function( ev ) {
			var el = $(ev.target);
			el.up('.explain').html( htmlEntities( el.val() ) );
			el.remove();
		});

		el.html( textarea );
	});
});
</script>

<h1><?=_("Manual View")?></h1>

<h2>
	<?=_("about : ")?><?=$model->getFile()?>
	<span class='datetime'><?=date('Y-m-d H:i:s', $model->getCTime() ) ?></span>
</h2>

<nav class='component'>
	<a href='./'><?=_("Index")?></a>
</nav>

<form id='ManualWrite' method='post' action='./save'>
	<input type='hidden' name='file' value='<?=$model->getFile()?>' />
	<input type='hidden' id='contents' name='contents' value='' />

	<section id='ManualView'>
	<? if ( $model->isFile() ) : ?>
	<?=$model ?>
	<? else: ?>
	<p class='notice'>No contents</p>
	<? endif; ?>
	</section>

	<nav class='buttons'>
		<button type='submit'>Save</button>
	</nav>
</form>
