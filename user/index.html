<h1>User</h1>

<form class='changeSubmit simpleSearch' method='get' action='?'>
	<input type='radio' id='levelAll' name='level' value='' <?=(! $g->get->level)?'checked':''?> />
	<label for='levelAll'>모두 보기</label>
	<? foreach( $model->getConfig('level')->data as $row ): ?>
	<? if ( $row->value <= $g->log->getLevel() ) continue; ?>
	<input type='radio' id='level<?=$row->value?>' name='level' value='<?=$row->value?>' <?=($row->value == $g->get->level)?'checked':''?> />
	<label for='level<?=$row->value?>'><?=$row->label?></label>
	<? endforeach; ?>
</form>


<table class='simple'>
	<thead>
		<tr>
			<th>국가</th>
			<th>이름</th>

			<? if ( $g->log->inLevel('0-1') ): ?>
			<th>아이디</th>
			<? endif; ?>

			<th>Email</th>
			<th>현재권한</th>
			<th>요청권한</th>
			<th>권한 변경</th>
			<th>Buttons</th>
		</tr>
	</thead>
	<tbody>
	<? foreach( $index as $row ): ?>
	<tr>
		<td><?=$row->locale?></td>
		<td><a href='./view?id=<?=$row->id?>'><?=$row->name?></a></td>

		<? if ( $g->log->inLevel('0-1') ): ?>
		<td><a href='./view?id=<?=$row->id?>'><?=$row->userid?></a></td>
		<? endif; ?>

		<td><a href='mailto:<?=$row->email?>'><?=$row->email?></a></td>
		<td><?=$row->levelName?></td>
		<td>
			<? if ( $row->level == 100 ): ?>
			<?=$row->requestName?>
			<a href='./updateLevel?id=<?=$row->id?>&level=<?=$row->request?>'>가입 승인</a>
			<? endif; ?>
		</td>
		<td class='buttons'>
			<? foreach( $model->getConfig('level')->data as $level ): ?>
			<? if ( $level->value <= $g->log->getLevel() ) continue; ?>
			<a href='./updateLevel?id=<?=$row->id?>&level=<?=$level->value?>'><?=$level->label?></a>
			<? endforeach; ?>
		</td>
		<td class='buttons'>
			<a href='./write?id=<?=$row->id?>'>수정</a>
			<a href='./delete?id=<?=$row->id?>'>삭제</a>
		</td>
	</tr>
	<? endforeach; ?>
	</tbody>
</table>

<? if ( $index->isEmpty() ) : ?>
<p class='notice'>No searched list.</p>
<? endif; ?>

<?=$index->getPageNavi()?>
